<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Modules - Mimosa</title>
  <meta name="description" content="Mimosa is pluggable so new functionality can be added.">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- <link rel="stylesheet" href="css/main.css"> -->
  <link rel="stylesheet" href="css/bootstrap.min.css" >
  <link rel="stylesheet" href="css/bootstrap-responsive.min.css" >
  <link rel="stylesheet" href="css/app.css">

  <link rel="shortcut icon" href="img/favicon.ico">
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="img/apple-touch-icon-144-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="img/apple-touch-icon-114-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="img/apple-touch-icon-72-precomposed.png">
  <link rel="apple-touch-icon-precomposed" href="img/apple-touch-icon-57-precomposed.png">
</head>
<body data-spy="scroll" data-target=".subnav" data-offset="50">

  <div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <div class="nav-collapse collapse">
          <ul class="nav">
            <li class="">
              <a href="./index.html">Mimosa</a>
            </li>
            <li class="">
              <a href="./started.html">Get Started</a>
            </li>
            <li class="">
              <a href="./commands.html">Commands</a>
            </li>
            <li class="">
              <a href="./compilers.html">Compilers</a>
            </li>
            <li  class="active">
              <a href="./modules.html">Modules</a>
            </li>
            <li class="">
              <a href="./server.html">Serve</a>
            </li>
            <li class="">
              <a href="./utilities.html">Utilities</a>
            </li>
            <li class="">
              <a href="./optimization.html">Optimization</a>
            </li>
            <li class="">
              <a href="./configuration.html">Configuration</a>
            </li>
            <li class="">
              <a href="./about.html">About/FAQ</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>

<div class="container main">

  <header class="jumbotron subhead" id="overview">
    <h1>Modules</h1>
    <p class="lead">Extend Mimosa's default functionality, and publish your own extensions</p>
    <div class="subnav">
      <ul class="nav nav-pills">
        <li><a href="#overview" title="Module commands">Overview</a></li>
        <li><a href="#list" title="Module commands">List</a></li>
        <li><a href="#use" title="Installing a module">Module Install and Usage</a></li>
        <li><a href="#commands" title="Module commands">Commands</a></li>
        <li><a href="#create" title="Create a new project">Create</a></li>
        <li><a href="#register" title="Register your Module">Register</a></li>
        <li><a href="#callback" title="Your Module Callback, Where Your Code Gets Called">Module Callback</a></li>
        <li><a href="#install" title="How to get Mimosa to know about your Module">Installing Your Module</a></li>
      </ul>
    </div>
  </header>

  <section class="command-list">
    <div class="page-header" id="overview">
      <h1>
        What is a Module? <small><span class="options">Mimosa is the car, modules drive</span></small>
      </h1>
    </div>

    <p>So maybe Mimosa doesn't come with exactly what you need out of the box.  Maybe you want to use a different linter, or you want to kick off your testing suite on every file save. A module can probably help.</p>

    <p>A Mimosa module is a node.js project that, when installed inside Mimosa, can be used as part of a Mimosa workflow or introduce a new Mimosa command. Mimosa is able to use a module because modules implement a simple interface Mimosa can access.</p>

    <p>There's a strong chance what you need can be created as a new module. In most cases all that is required to install a module is to include the module's name in the Mimosa configuration. Mimosa self-installs modules it comes across but does not already know about.</p>

    <div class="page-header" id="list">
      <h1>
        Modules List <small><span class="options">small list for now, make it bigger, build your own!</span></small>
      </h1>
    </div>

    <h2>Included Modules</h2>

    <p>The table below lists the modules that come baked into Mimosa.  These do not need to be installed separately.</p>

    <br/>

    <table class="table table-striped table-bordered table-condensed">
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><a href="./utilities.html#lint">lint</a></td>
          <td>CSS and JS linting/hinting</td>
        </tr>
        <tr>
          <td><a href="./utilities.html#requirejs">require</a></td>
          <td>AMD/RequireJS support including optimization</td>
        </tr>
        <tr>
          <td><a href="./server.html">server</a></td>
          <td>Mimosa-based hosting and managing user hosting</td>
        </tr>
        <tr>
          <td><a href="./utilities.html#reload">live-reload</a></td>
          <td>Application reloads when the code does</td>
        </tr>
        <tr>
          <td><a href="./optimization.html#min">minify</a></td>
          <td>Minification of JavaScript assets</td>
        </tr>
      </tbody>
    </table>

    <h2>External Modules</h2>

    <p>The table below lists the modules that do not come with Mimosa, but can be installed.</p>

    <br/>

    <table class="table table-striped table-bordered table-condensed">
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><a href="https://github.com/dbashford/mimosa-web-package">web-package</a></td>
          <td>Packaging of node-based user server for deployment</td>
        </tr>
        <tr>
          <td><a href="https://github.com/dbashford/mimosa-require-commonjs">require-commonjs</a></td>
          <td>CommonJS support via AMD/RequireJS</td>
        </tr>
        <tr>
          <td><a href="https://github.com/dbashford/mimosa-combine">combine</a></td>
          <td>Combine all non-binary files in a folder into a single file</td>
        </tr>
        <tr>
          <td><a href="https://github.com/CraigCav/mimosa-karma">karma</a></td>
          <td><a href="http://karma-runner.github.io/0.8/index.html">Karma</a> (formerly Testacular) test runner integration</td>
        </tr>
        <tr>
          <td><a href="https://github.com/dbashford/mimosa-testem-simple">testem-simple</a></td>
          <td>Simple <a href="https://github.com/airportyh/testem">Testem</a> test runner integration.</td>
        </tr>
        <tr>
          <td><a href="https://github.com/dbashford/mimosa-server-reload">server-reload</a></td>
          <td>Restart a node server when server assets change</td>
        </tr>
        <tr>
          <td><a href="https://github.com/dbashford/mimosa-import-source">import-source</a></td>
          <td>Copy other files into a project to be included as part of the project.</td>
        </tr>
        <tr>
          <td><a href="https://github.com/dbashford/mimosa-server-template-compile">server-template-compile</a></td>
          <td>Copy your server templates into static HTML as part of a build.</td>
        </tr>
        <tr>
          <td><a href="https://github.com/dbashford/mimosa-requirebuild-textplugin-include">requirebuild-textplugin-include</a></td>
          <td>Both an example module for modifying the r.js configuration dynamically, and a functional module that will include files attached to the text plugin to r.js runs.</td>
        </tr>
        <tr>
          <td><a href="https://github.com/dbashford/mimosa-volo">volo</a></td>
          <td>Introduces a <code class="option">import</code> command that wraps <a href="https://github.com/volojs/volo">Volo</a> functionality.  Comprises the <code class="option">import</code> command that came bundled with Mimosa pre 0.7.2.</td>
        </tr>
        <tr>
          <td><a href="https://github.com/dbashford/mimosa-skeleton">skeleton</a></td>
          <td>Adds three new commands to interact with Mimosa skeletons. This module will eventually be a default included Mimosa module once more skeletons have been developed. For more information, visit the <a href="https://github.com/dbashford/mimosa-skeleton">github page</a>.</td>
        </tr>
        <tr>
          <td><a href="https://github.com/dbashford/mimosa-client-jade-static">client-jade-static</a></td>
          <td>Compiles Jade files with a `.html.jade` extension statically and writes them out as plain HTML.</td>
        </tr>
      </tbody>
    </table>

    <div class="page-header" id="use">
      <h1>
        Installing and Using Modules <small><span class="options">takes longer to read about it than do it</span></small>
      </h1>
    </div>

    <p>There are four ways to install a module.</p>

    <h2>The easiest way: just update the mimosa-config modules array</h2>

    <p>One way to install a module is to just add it to the <a href="./configuration.html#modules">modules</a> array in the <code class="option">mimosa-config</code> for a project. This is a shortcut for the project level <code class="option">npm install</code> (covered next). The next time Mimosa is started for that project it will install the module into the Mimosa project from NPM. For example, to add the <code class="option">mimosa-web-package</code> module, include <code class="option">web-package</code> in the uncommented <a href="./configuration.html#modules">modules</a> config. Run, for instance, <code class="option">mimosa watch</code>, and the first thing Mimosa will do is go fetch <code class="option">mimosa-web-package</code> from NPM.</p>

    <p>To use a module it needs to be added to the <a href="./configuration.html#modules">modules</a> array anyway, so this shortcut saves the installation step.</p>

    <h2>Project npm install</h2>

    <p>Place and install Mimosa modules in the project itself and Mimosa will prioritize those modules above all others. Run <code class="option">npm install mimosa-nameOfModule</code> and the module will be installed. Modules installed inside a project take precedence over any modules installed into other scopes.</p>

    <h2>mimosa mod:install</h2>

    <p>One way to install a module is the <code class="option">mod:install</code> command discussed further below. <code class="option">mimosa mod:install mimosa-web-package</code> will install <code class="option">mimosa-web-package</code> from NPM. The module will still need to be added to any projects that need to use it. This command adds the module right into the Mimosa install as if it was installed with Mimosa itself.  This allows Mimosa to draw from it when building a new <code class="option">mimosa-config</code>. If a module is installed inside Mimosa, Mimosa will include that module's configuration snippet inside any generated <code class="option">mimosa-config</code>.</p>

    <h2>npm install</h2>

    <p>Use <code class="option">npm install -g</code> to install any modules into the global node scope. Modules installed with <code class="option">mod:install</code> take priority, so if any modules are installed with both <code class="option">npm install -g</code> and <code class="option">mod:install</code>, the <code class="option">npm install -g</code> module will be ignored.</p>

    <h2>Install specific module version</h2>

    <p>To install a specific version of a module, to, for instance, ensure everyone on a project stays on the same version, add a <code class="option">@</code> followed by the version after the module name. Ex: <code class="option">web-package@0.1.0</code>. This is also accomplished using by managing versions in a project's package.json.</p>

    <div class="page-header" id="commands">
      <h1>
        List Installed Modules
        <small><span class="mim">mimosa</span> <span class="command">mod:list</span> <span class="options">[-v/--verbose]</span></small>
      </h1>
    </div>
    <div class="row">
      <div class="span6">
        <h2>mod:list</h2>

        <p>Execute <code class='option'>mod:list</code> to see a list of all the installed Mimosa modules. The displayed list includes the name, version, and URL of the website of the module.</p>

        <pre>$ mimosa mod:list</pre>

        <h3>Get more details (-v/--verbose)</h3>

        <p>Add a <code class="option">--verbose</code> flag and Mimosa will including a short description and the list of dependencies the module has on other node.js modules.</p>

        <pre>$ mimosa mod:list --verbose
$ mimosa mod:list -v</pre>

      </div>

      <div class="span6 term">
        <div class="inner">
          <p>
            Davids-MacBook-Pro:webapp dbashford$ mimosa mod:list<br/><br/>
            <span class="inst">The following is a list of the Mimosa modules you have installed.</span><br/><br/>
            <span class="fb">Name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Version&nbsp;&nbsp;&nbsp;Website</span><br/>
            <span class="inst">mimosa-server&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.2.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.mimosajs.com</span><br/>
            <span class="inst">mimosa-require&nbsp;&nbsp;&nbsp;&nbsp;0.2.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.mimosajs.com</span><br/>
            <span class="inst">mimosa-minify&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.2.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.mimosajs.com</span><br/>
            <span class="inst">mimosa-lint&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.2.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.mimosajs.com</span><br/><br/>
            <span class="inst">To view more module details, execute 'mimosa mod:list -v' for 'verbose' logging. </span><br/><br/>
            Davids-MacBook-Pro:webapp dbashford$<br/>
          </p>
        </div>
      </div>
    </div>
    <div class="page-header">
      <h1>
        Search NPM for Modules
        <small><span class="mim">mimosa</span> <span class="command">mod:search</span> <span class="options">[-v/--verbose]</span></small>
      </h1>
    </div>
    <div class="row">
      <div class="span6">
        <h2>mod:search</h2>

        <p><code class='option'>mod:search</code> will search <a href="https://npmjs.org/">NPM</a> to find all the available Mimosa modules. This command can take some time as it talks over HTTP to NPM, finding all available modules and then narrowing down the list to just those prefixed with 'mimosa-'.</p>

        <pre>$ mimosa mod:search</pre>

        <p>Included in the list of modules is the name, current version, last time it was updated, whether or not it is already installed, and a website for the module.</p>

        <h3>Get more details (-v/--verbose)</h3>

        <p>Add a <code class="option">--verbose</code> flag and Mimosa will include additional information including a short description and the list of dependencies the module has on other node.js modules.</p>

        <pre>$ mimosa mod:search --verbose
$ mimosa mod:search -v</pre>

      </div>

      <div class="span6 term">
        <div class="inner">
          <p>
            Davids-MacBook-Pro:webapp dbashford$ mimosa mod:search<br/><br/>

            <span class="inst">Searching NPM for Mimosa modules, this might take a few seconds...</span><br/><br/>

            <span class="inst">The following is a list of the Mimosa modules in NPM.</span><br/><br/>

            <span class="fb">Name &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Version&nbsp;Updated&nbsp;&nbsp;&nbsp;&nbsp;Installed?&nbsp;Website</span><br/>
            <span class="inst">mimosa-logger&nbsp;&nbsp;0.1.0
              &nbsp;&nbsp;2012-10-21 no        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          http://www.mimosajs.com
            </span><br/>
            <span class="inst">mimosa-server&nbsp;&nbsp;0.2.1
              &nbsp;&nbsp;2012-10-25 yes
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
              http://www.mimosajs.com
            </span><br/>
            <span class="inst">mimosa-lint&nbsp;&nbsp;&nbsp;&nbsp;0.2.0
              &nbsp;&nbsp;2012-10-24 yes
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.mimosajs.com
            </span><br/>
            <span class="inst">mimosa-require&nbsp;0.2.0
              &nbsp;&nbsp;2012-10-24 yes &nbsp;&nbsp;
              &nbsp;&nbsp;&nbsp;&nbsp;http://www.mimosajs.com
            </span><br/>
            <span class="inst">mimosa-minify&nbsp;&nbsp;0.2.0
              &nbsp;&nbsp;2012-10-24 yes
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
              http://www.mimosajs.com
            </span><br/><br/>

            <span class="inst">To view more module details, execute 'mimosa mod:search -v' for 'verbose' logging.</span><br/><br/>

            <span class="inst">Install modules by executing 'mimosa mod:install [name of module]'</span><br/><br/>

            Davids-MacBook-Pro:webapp dbashford$<br/>
          </p>
        </div>
      </div>
    </div>
    <div class="page-header">
      <h1>
        Install a Module
        <small><span class="mim">mimosa</span> <span class="command">mod:install</span> <span class="options">[moduleName]</span></small>
      </h1>
    </div>
    <div class="row">
      <div class="span6">
        <h2>mod:install</h2>

        <p>To install a module execute <code class='option'>mimosa mod:install</code> and provide the name of the module.</p>

        <pre>$ mimosa mod:install mimosa-server</pre>

        <p>If the module has already been installed, this will update it to the latest version. To install a specific version of a module, add the version after a @.</p>

        <pre>$ mimosa mod:install mimosa-server@0.2.0</pre>

        <p>To use and test a module under local development that isn't in NPM execute <code class='option'>mod:install</code> without providing a name for the module.  For this to work properly, the command must be executed from the same directory as the module's package.json, which should be the root of the module. Once the module is installed, Mimosa treats it the same as a module it installed from NPM.</p>

      </div>
      <div class="span6 term">
        <div class="inner">
          <p>
            Davids-MacBook-Pro:webapp dbashford$ mimosa mod:install mimosa-server@0.2.0<br/><br/>

            <span class="inst">09:57:43 - Install of 'mimosa-server@0.2.0' successful</span> <br/><br/>

            Davids-MacBook-Pro:webapp dbashford$
          </p>
        </div>
      </div>
    </div>
    <div class="page-header">
      <h1>
        Uninstall a Module
        <small><span class="mim">mimosa</span> <span class="command">mod:uninstall</span> <span class="options">[nameOfModule]</span></small>
      </h1>
    </div>
    <div class="row">
      <div class="span6">
        <h2>mod:uninstall</h2>

        <p>Execute <code class='option'>mod:uninstall</code> to remove a module from Mimosa.</p>

        <pre>$ mimosa mod:uninstall mimosa-server</pre>

      </div>

      <div class="span6 term">
        <div class="inner">
          <p>
            Davids-MacBook-Pro:webapp dbashford$ mimosa mod:uninstall mimosa-server<br/><br/>

            <span class="inst">09:57:43 - Uninstall of 'mimosa-server' successful</span> <br/><br/>

            Davids-MacBook-Pro:webapp dbashford$
          </p>
        </div>
      </div>
    </div>
    <div class="page-header">
       <h1>
         Initialize Your Own Module
         <small><span class="mim">mimosa</span> <span class="command">mod:init</span> <span class="options">[nameOfModule]</span> <span class="options">[-c/--coffee]</span></small>
       </h1>
     </div>
     <div class="row">
       <div class="span6">
         <h2>mod:init</h2>

         <p>Execute <code class='option'>mod:init</code> and provide the command with a 'mimosa-' prefixed module name and Mimosa will create a directory using the name (or use an existing directory), and place a module skeleton inside. The skeleton contains heavily documented JavaScript code to get started, <a href="http://jashkenas.github.com/docco/">docco</a>-generated documentation for that code, and a starter <code class='option'>package.json</code> for deploying the module to <a href="https://npmjs.org/">NPM</a>.</p>

         <p>All of the <code class='option'>package.json</code> placeholders need to be changed before publishing to NPM. The following sections go into detail about what steps to take with the new module skeleton.</p>

         <pre>$ mimosa mod:init mimosa-foo</pre>

         <h3>Prefer CoffeeScript? (-c/--coffee)</h3>

         <p>Add a <code class="option">--coffeescript</code> flag and Mimosa will provide a CoffeeScript skeleton instead of JavaScript.</p>

         <pre>$ mimosa mod:init -c
$ mimosa mod:init --coffee</pre>

       </div>

       <div class="span6 term">
         <div class="inner">
           <p>
             Davids-MacBook-Pro:mimosaplay dbashford$ mimosa mod:init mimosa-foo<br/><br/>

             <span class="inst">10:06:59 - Module skeleton successfully placed in mimosa-foo directory. The first thing you'll want to do is go into mimosa-foo/package.json and replace the placeholders.</span> <br/><br/>

             Davids-MacBook-Pro:mimosaplay dbashford$
           </p>
         </div>
       </div>
     </div>

     <div class="page-header">
       <h1>
         Get Module Configuration
         <small><span class="mim">mimosa</span> <span class="command">mod:config</span> <span class="options">[nameOfModule]</span></small>
       </h1>
     </div>
     <div class="row">
       <div class="span6">
         <h2>mod:config</h2>

         <p>Execute <code class='option'>mod:config</code> to have Mimosa write to the console the configuration placeholder for a module. This is useful when needing to add the configuration for a newly installed module to the <code class='option'>mimosa-config</code>.</p>

         <pre>$ mimosa mod:config server</pre>

       </div>

       <div class="span6 term">
         <div class="inner">
           <p>
             Davids-MacBook-Pro:foo dbashford$ mimosa mod:config live-reload
             <br/><br/><br/>

             <span class="inst"># liveReload:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Configuration for live-reload<br/>
                &nbsp;&nbsp;# enabled:true&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Whether or not live-reload is enabled<br/>
                &nbsp;&nbsp;# additionalDirs:["views"]&nbsp;&nbsp;&nbsp;# Additional directories outside the watch.compiledDir<br/>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# that you would like to have trigger a page refresh,<br/>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# like, by default, static views</span> <br/><br/><br/>

             Davids-MacBook-Pro:foo dbashford$
           </p>
         </div>
       </div>
     </div>

    <div class="page-header" id="create">
      <h1>
        Create Your Own Module
        <small><span class="options">getting off the ground</span></small>
      </h1>
    </div>

    <h2>Where to start?</h2>

    <p>Mimosa can help module development get off the ground with a module skeleton. Discussed above, the <code class='option'>mod:init</code> command will create a module skeleton. The only hard and fast rule with Mimosa modules is that when they are created they must be prefixed with 'mimosa-'. This makes them easy to find if someone else wants to use them, but also differentiates Mimosa's modules from all of the libraries both in <a href="https://npmjs.org/">NPM</a> and inside Mimosa.</p>

    <p>One great place to start, if you want to skip reading and get right to code, is to check out some existing modules, like <a href="https://github.com/dbashford/mimosa-lint">mimosa-lint</a>
 and <a href="https://github.com/dbashford/mimosa-minify">mimosa-minify</a>.</p>

    <h2>What does mod:init give me?</h2>

    <p><code class='option'>mod:init</code> provides a group of files to get module development started.</p>

    <ul>
      <li><code class='option'>package.json</code>: Those familiar with node.js recognize this file. This defines all sorts of metadata about a node project: the project name, dependencies, repo location, a description, and more. When a project is published to <a href="https://npmjs.org/">NPM</a>, NPM expects the <code class='option'>package.json</code> to be present.  The <code class='option'>package.json</code> that Mimosa provides needs some editing.  Many of the fields inside of it are placeholders and should be changed before publishing.</li>
      <li><code class='option'>index.js</code>/<code class='option'>index.coffee</code>: This highly commented file defines a module's interface to Mimosa.  Mimosa will use this file to execute a module's functionality. How a module is structured is entirely up to the developer, as long as the functions Mimosa expects are exported in the <code class='option'>index</code> file.</li>
      <li><code class='option'>config.js</code>/<code class='option'>config.coffee</code>: This file is also highly commented and contains three functions that might need to be implemented: a function that returns the default configuration, a function that returns a string placeholder for the <code class='option'>mimosa-config</code>, and a function that validates a user's configuration for the module. Mimosa calls these functions at different times. If a module has no configuration at all, the functions and the file can be removed, or they can be left and commented out in case configuration might be introduced later.</li>
      <li>A <code class='option'>docs</code> folder: Using a tool called <a href="http://jashkenas.github.com/docco/">Docco</a> the comments in the <code class='option'>config</code> and <code class='option'>index</code> files have been turned into easy to read web pages, with comments alongside code. This is the real place to start. Read through the the Docco pages and get comfy with the concepts.</li>
      <li>A starter <code class='option'>README.md</code> with a few things filled out.</li>
    </ul>

    <h2>Mimosa module interface</h2>

    <p>At different times, Mimosa will attempt to execute five different functions in a module.  All of the functions are optional.</p>

    <h3>registerCommand(program, retrieveConfig)</h3>

    <p>The <code class='option'>registerCommand</code> function is self-explanatory. This function is used to register new Mimosa commands.</p>

    <p>The arguments passed in are:</p>
    <ul>
      <li><code class='option'>program</code>: A <a href="https://github.com/visionmedia/commander.js/">commander</a> <code class='option'>program</code> object. Use this object to register commands, help text, flags, and the command's callback.</li>
      <li><code class='option'>retrieveConfig</code>: A callback function that a module can use to execute a Mimosa <code class='option'>clean</code> and <code class='option'>build</code> and get the full <code class='option'>mimosa-config</code> should it be needed. This function takes two parameters, a flag to indicate if a build should be run before executing the command, and a callback function to execute the command module's code. That callback is passed the full <code class='option'>mimosa-config</code>.</p>
    </ul>

    <p>The <a href="https://github.com/dbashford/mimosa-volo/blob/master/index.coffee">mimosa-volo</a> module is a good example module for how to add a command to Mimosa.  It adds an <code class='option'>import</code> command and makes use of the <code class='option'>mimosa-config</code> during execution.</p>

    <h3>defaults()</h3>
    <p>A module's <code class='option'>defaults</code> function is called when Mimosa starts up and is used to assemble the configuration used by Mimosa.  <code class='option'>defaults</code> should return a JavaScript object that is the default configuration for the module. That default configuration is merged with the user provided configuration to establish the full <code class='option'>mimosa-config</code>.</p>

    <pre>exports.defaults = function() {
  return {
    minify: {
      exclude: [/\.min\./]
    }
  };
};</pre>

    <p>If a module doesn't have its own configuration, then this function does not need to be implemented.</p>

    <h3>placeholder()</h3>
    <p>A module's <code class='option'>placeholder</code> function is called when Mimosa is building the <code class='option'>mimosa-config.coffee</code> file that is delivered to a user during both the <code class='option'>mimosa new</code> and <code class='option'>mimosa config</code> commands. Use this function to return a string that shows what the module's configuration is and then explains each setting.</p>

    <pre>exports.placeholder = function() {
  return "\t\n\n"+
         "  # minify:                    # Configuration for non-require minification/compression via uglify\n" +
         "                               # using the --minify flag.\n" +
         "    # exclude:[/\\.min\\./]     # List of regexes to exclude files when running minification.\n" +
         "                               # Any path with \".min.\" in its name, like jquery.min.js, is assumed to\n" +
         "                               # already be minified and is ignored by default. Override this property\n" +
         "                               # if you have other files that you'd like to exempt from minification.";
};</pre>

    <p>If a module doesn't have its own configuration, then this function does not need to be implemented.</p>

    <h3>validate(mimosaConfig, validators)</h3>
    <p>A module's <code class='option'>validate</code> function is called when Mimosa starts up and after Mimosa has put together the full <code class='option'>mimosa-config</code>. That full config is passed to the validate method of all modules and each module has the opportunity to ensure that the config settings are valid. This method should return an array of strings. Each string represents an error that the module has found with the config. If a module return any errors, Mimosa will print the errors and exit to give the user a chance to update the config.</p>

    <p>The <code class='option'>validate</code> function is also passed, as the second parameter, an object containing a collection of validation and utility functions. The best way to learn what those functions are is to <a href="https://github.com/dbashford/mimosa/blob/master/src/util/validators.coffee">check the source</a>.

    <p>If there are no errors, return an empty array. If there is no config to validate, then do not implement the method.</p>

    <p>This method is also the last opportunity to edit the module's configuration. After this method is called, the configuration is completely locked down and cannot be edited. For example, a module may take a list of regexs and turn them into a single RegExp object.</p>

    <pre>
exports.validate = function(config, validators) {
  var errors = [];
  if validators.ifExistsIsObject(errors, "minify config", config.minify) {
    if validators.ifExistsIsArray(errors, "minify.exclude", config.minify.exclude) {
      var exls = config.minify.exclude;
      for (var _i = 0, _len = exls.length; _i < _len; _i++) {
        var ex = exls[_i];
        if (typeof ex !== "string") {
          errors.push("minify.exclude must be an array of strings");
          break;
        }
      }
    }
  }

  if (errors.length === 0 && config.minify.exclude && config.minify.exclude.length > 0) {
    config.minify.exclude = new RegExp(config.minify.exclude.join("|"), "i");
  }

  return errors;
};</pre>

    <h3>registration(mimosaConfig, register)</h3>

    <p>The <code class='option'>registration</code> function is the most important function of a module. This function is called during Mimosa's startup and it allows a module to bind to one or many steps in a Mimosa workflow. Inside this function is where a module tells Mimosa to call its functions at certain times.</p>

    <p>The arguments passed in are:</p>
    <ul>
      <li><code class='option'>mimosaConfig</code>: The full <code class='option'>mimosa-config</code> including added flags to indicate what sort of Mimosa command is being run (like isForceClean), and an added list of extensions being used by the application. A developer may decide based on the flags in the config to not register anything, which is fine. In the case of the minification example below, if the isMinify flag isn't turned on then the module doesn't register itself.</li>
      <li><code class='option'>register</code>: This is a function handed to a module as a means to register a module with Mimosa. More information about how to use this register function follows in the next section.</li>
    </ul>

    <pre>registration = (mimosaConfig, register) ->
  if mimosaConfig.isMinify
    e = mimosaConfig.extensions
    register ['add','update','buildFile'],      'afterCompile', _minifyJS,  [e.javascript...]
    register ['add','update','buildExtension'], 'beforeWrite',  _minifyJS,  [e.template...]</pre>

    <div class="page-header" id="register">
      <h1>
        Registering A Workflow Module
        <small><span class="options">control when code gets called</span></small>
      </h1>
    </div>

    <p>As mentioned in a previous section, a module should implement a <code class='option'>registration</code> function that Mimosa calls when it starts up. When Mimosa calls the module's <code class='option'>registration</code> function, Mimosa passes the enriched <code class='option'>mimosa-config</code> and a <code class='option'>register</code> callback.  The <code class='option'>register</code> callback is what a module uses to inform Mimosa what function in the module to call and under what circumstances to call it.  The <code class='option'>register</code> function takes the following four parameters:</p>

    <ol>
      <li>A list of workflows, an array of strings. Pick one-to-many workflows depending on the sort of task the module accomplishes. Possible values: buildFile, buildExtension, postBuild, add, update, remove, preClean, cleanFile, postClean. These are explained below.</li>
      <li>A workflow step, a string. A workflow step for the selected workflows. For example, for the 'update' workflow, a module's code might be executed 'afterCompile'.The list of steps for each workflow is explained below.</li>
      <li>Module callback, a function. This is the function Mimosa will call when processing reaches the workflow(s) and step called out in the previous parameters.</li>
      <li>An optional array of extensions upon which to execute the callback. If the file or extension being processed doesn't match one of these extensions, the callback will not be executed. The extensions refer to the original extension of the file being processed, so in the case of a CoffeeScript file it would be 'coffee' and not 'js'. The passed in <code class='option'>mimosaConfig</code> object has an <code class='option'>extensions</code> object a module can use to cover all of the desired extensions. The <code class='option'>extensions</code> object has 4 properties: <code class='option'>javascript</code>, <code class='option'>css</code>, <code class='option'>template</code>, and <code class='option'>copy</code>. If no extensions are provided, Mimosa will send all files/extensions through the module.</li>
    </ol>

    <pre>register ['add','update','buildFile'],      'afterCompile', _minifyJS,  [e.javascript...]
register ['add','update','buildExtension'], 'beforeWrite',  _minifyJS,  [e.template...]</pre>

    <p>Notice that the register method is executed multiple times. There is nothing stopping a module from registering multiple times for multiple workflows.</p>

    <h2>Workflows</h2>

    <p>A workflow is a set of steps an asset, a group of assets, or an application can go through. There are three groups of workflows: build, watch and clean.</p>

    <h3>Build Workflows</h3>

    <p>Modules registered to take place during the build workflows perform project builds. The build workflows are all prefixed with <code class="options">build</code> and they all occur in order during Mimosa's startup. <code class="options">preBuild</code> occurs first, followed by <code class="options">buildFile</code>, <code class="options">buildExtension</code>, and <code class="options">postBuild</code>.</p>

    <h4>preBuild</h4>
    <p><code class="options">preBuild</code> is processed before any asset is handled. This is the workflow for preparing the file system and moving files around in preparation for individual file processing.</p>

    <h4>buildFile</h4>
    <p>During <code class="options">buildFile</code> each file in the configured <code class="options">watch.sourceDir</code> is individually processed. This step is when, for instance, CoffeeScript files are compiled to JavaScript and written to <code class="options">watch.compiledDir</code>.  It is also when images are copied to the <code class="options">watch.compiledDir</code>.</p>

    <p>Some assets, like micro-template files (Handlebars or Dust) and CSS preprocessor files (SASS or LESS) are not processed during this step as they, during startup, need to be dealt with as a group rather than individually.</p>

    <h4>buildExtension</h4>
    <p>After all of the assets are processed individually, <code class="options">buildExtension</code> makes another pass through all the assets, but this time to handle extension-wide processing. Now is when Mimosa handles the file types that need to be managed as a group like micro-templates and CSS preprocessors.</p>

    <p>For instance, if a project uses SASS, then it might have 20 includes/partials that result in two top-level files. Mimosa will process all 20 files at once and recognize that only two files need to be compiled</p>

    <h4>postBuild</h4>

    <p>After the extensions are finished, individual asset handling is finished. <code class="options">postBuild</code> is when post asset completion tasks, like asset optimization, take place. <code class="options">postBuild</code> is also when servers are started. If a module was being built for something like installing the app to Heroku, then <code class="options">postBuild</code> is a candidate workflow.</p>

    <h3>Watch Workflows</h3>

    <p>If <code class="options">mimosa build</code> was executed, then after <code class="options">postBuild</code> is done, Mimosa exits.  If <code class="options">mimosa watch</code> is executed, then Mimosa keeps running and monitors the project's codebase for changes. When changes occur, the watch workflows are executed. The watch types are very straight forward.</p>

    <p>For watch types no delineation exists between file and extension.  For each type only a single file is processed at a time. So modules like the CSS and micro-templates compilers perform extension-wide tasks based on the single file that was updated.</p>

    <h4>add</h4>
    <p>The <code class="options">add</code> workflow is kicked off when a new file is added to the <code class="options">watch.sourceDir</code> directory.</p>

    <h4>update</h4>
    <p>The <code class="options">update</code> workflow is run when an existing file in the <code class="options">watch.sourceDir</code> directory is saved.</p>

    <h4>remove</h4>
    <p>The <code class="options">remove</code> workflow is executed when a file in the <code class="options">watch.sourceDir</code> directory is deleted.</p>

    <h3>Clean Workflows</h3>

    <p>The clean workflows execute when using <code class="options">mimosa clean</code> (but not currently when <code class="options">--force</code> is used), and when the <code class="options">--clean</code> flag is used with <code class="options">mimosa watch</code>. These workflows are responsible for removing compiled, copied and created assets and to generally return a project to a pre-Mimosa state. The clean workflows are always executed together and in order. </p>

    <p>Modules can create and deposit files during the other workflows. A good module will use the clean workflows to tidy up after itself.</p>

    <h4>preClean</h4>
    <p>The <code class="options">preClean</code> workflow is executed first and is an opportunity to handle files before <code class="options">cleanFile</code> comes through and deals with each file individually.</p>

    <h4>cleanFile</h4>
    <p>Each file in the <code class="options">watch.sourceDir</code> is passed through the <code class="options">cleanFile</code> workflow one at a time.</p>

    <h4>postClean</h4>
    <p>The <code class="options">postClean</code> workflow is the final opportunity to tidy up files and directories. This is when, for example, a module might make a pass to remove any empty directories the module might be responsible for that remain after the files have been handled.</p>

    <h2>Workflow Steps <small><span class="options">a list of processing steps for each workflow</span></small></h2>

    <p>The previous section covered each of the workflows. Each workflow has many steps within it. An example is the best way to illustrate how steps relate to workflows.</p>

    <p>The simplest workflow is <code class="options">update</code>. If a CoffeeScript file is saved inside the <code class="options">watch.sourceDir</code> while Mimosa is running, here is what happens:</p>

    <ol>
      <li>The first step executed is <code class="options">init</code>. During the <code class="options">init</code> step, Mimosa will generate some information about the asset to be used by future steps. For instance it will set a flag into the <code class="options">options</code> object (discussed in the next section) to indicate that the file is a JavaScript file, and it will set flags to indicate if the file is a vendor file or not.</li>
      <li>During a step named <code class="options">read</code> the modified CoffeeScript file is read in.</li>
      <li>The <code class="options">compile</code> step is next. Here the CoffeeScript gets compiled to JavaScript.</li>
      <li>Next is <code class="options">afterCompile</code>. Here the compiled JavaScript is linted to get feedback regarding code quality.</li>
      <li>If minification was selected, <code class="options">beforeWrite</code> is where the compiled JavaScript would be minified.</li>
      <li>During the <code class="options">write</code> step the compiled JavaScript is written to the <code class="options">watch.compiledDir</code></li>
      <li>You'd think we'd be done now, but not so fast! The <code class="options">afterWrite</code> step is where optimization takes place if that is selected.</li>
    </ol>

    <p>And there are many steps in this example that have no functionality registered against them.  The <code class="options">beforeRead</code>, <code class="options">afterRead</code> and <code class="options">beforeCompile</code> steps, for example, have no modules that registered to execute against them, but they are there in the event a module comes along that logically has tasks to perform at that point in the workflow.</p>

    <p>Also, many modules can register to be executed for the same workflow and step, they'll just be executed in order that they get registered which is determined by their order in the <code class="options">modules</code> array in the <code class="options">mimosa-config</code>.</p>

    <p>When building a module, a developer needs to decide which step is the right place to execute a module's functionality. For instance, if building a module that will run <a href="http://www.coffeelint.org/">CoffeeLint</a> over CoffeeScript to determine CoffeeScript code quality, then <code class="options">afterRead</code> is probably the best step. If, for instance, <code class="options">beforeRead</code> is used, then Mimosa will have not yet read in the file, and there will be nothing on which to run CoffeeLint.</p>

    <h2>Workflow Type & Step Breakdown</h2>

    <p>Below is the exhaustive list of all of the steps by workflow. Use the radio buttons to toggle between the different default Mimosa modules.</p>

    <br/>

    <div id="workflow-toggles" class="btn-group">
      <button data-type="build" class="btn span4 active">Build Workflows</button>
      <button data-type="watch" class="btn span4">Watch Workflows</button>
      <button data-type="clean" class="btn span4">Clean Workflows</button>
    </div>

    <br/>

    <div data-type="build" class="row workflow-steps">
      <div class="span3">
        <h3>preBuild</h3>
        <ul>
          <li>
            <div class="step">init</div>
          </li>
          <li>
            <div class="step">complete</div>
          </li>
        </ul>
      </div>

      <div class="span3">
        <h3>buildFile</h3>
        <ul>
          <li>
            <div class="step">init</div>
          </li>
          <li>
            <div class="step">beforeRead</div>
          </li>
          <li>
            <div class="step">read</div>
          </li>
          <li>
            <div class="step">afterRead</div>
          </li>
          <li>
            <div class="step">betweenReadCompile</div>
          </li>
          <li>
            <div class="step">beforeCompile</div>
          </li>
          <li>
            <div class="step">compile</div>
          </li>
          <li>
            <div class="step">afterCompile</div>
          </li>
          <li>
            <div class="step">betweenCompileWrite</div>
          </li>
          <li>
            <div class="step">beforeWrite</div>
          </li>
          <li>
            <div class="step">write</div>
          </li>
          <li>
            <div class="step">afterWrite</div>
          </li>
          <li>
            <div class="step">complete</div>
          </li>
        </ul>
      </div>
      <div class="span3">
        <h3>buildExtension</h3>
        <ul>
          <li>
            <div class="step">init</div>
          </li>
          <li>
            <div class="step">beforeRead</div>
          </li>
          <li>
            <div class="step">read</div>
          </li>
          <li>
            <div class="step">afterRead</div>
          </li>
          <li>
            <div class="step">betweenReadCompile</div>
          </li>
          <li>
            <div class="step">beforeCompile</div>
          </li>
          <li>
            <div class="step">compile</div>
          </li>
          <li>
            <div class="step">afterCompile</div>
          </li>
          <li>
            <div class="step">betweenCompileWrite</div>
          </li>
          <li>
            <div class="step">beforeWrite</div>
          </li>
          <li>
            <div class="step">write</div>
          </li>
          <li>
            <div class="step">afterWrite</div>
          </li>
          <li>
            <div class="step">complete</div>
          </li>
        </ul>
      </div>
      <div class="span3">
        <h3>postBuild</h3>
        <ul>
          <li>
            <div class="step">init</div>
          </li>
          <li>
            <div class="step">beforeOptimize</div>
          </li>
          <li>
            <div class="step">optimize</div>
          </li>
          <li>
            <div class="step">afterOptimize</div>
          </li>
          <li>
            <div class="step">beforeServer</div>
          </li>
          <li>
            <div class="step">server</div>
          </li>
          <li>
            <div class="step">afterServer</div>
          </li>
          <li>
            <div class="step">beforePackage</div>
          </li>
          <li>
            <div class="step">package</div>
          </li>
          <li>
            <div class="step">afterPackage</div>
          </li>
          <li>
            <div class="step">beforeInstall</div>
          </li>
          <li>
            <div class="step">install</div>
          </li>
          <li>
            <div class="step">afterInstall</div>
          </li>
          <li>
            <div class="step">complete</div>
          </li>
        </ul>
      </div>
    </div>

    <div data-type="watch" class="row workflow-steps hide">
      <div class="span4">
        <h3>add</h3>
        <ul>
          <li>
            <div class="step">init</div>
          </li>
          <li>
            <div class="step">beforeRead</div>
          </li>
          <li>
            <div class="step">read</div>
          </li>
          <li>
            <div class="step">afterRead</div>
          </li>
          <li>
            <div class="step">betweenReadCompile</div>
          </li>
          <li>
            <div class="step">beforeCompile</div>
          </li>
          <li>
            <div class="step">compile</div>
          </li>
          <li>
            <div class="step">afterCompile</div>
          </li>
          <li>
            <div class="step">betweenCompileWrite</div>
          </li>
          <li>
            <div class="step">beforeWrite</div>
          </li>
          <li>
            <div class="step">write</div>
          </li>
          <li>
            <div class="step">afterWrite</div>
          </li>
          <li>
            <div class="step">betweenWriteOptimize</div>
          </li>
          <li>
            <div class="step">beforeOptimize</div>
          </li>
          <li>
            <div class="step">optimize</div>
          </li>
          <li>
            <div class="step">afterOptimize</div>
          </li>
          <li>
            <div class="step">complete</div>
          </li>
        </ul>
      </div>
      <div class="span4">
        <h3>update</h3>
        <ul>
          <li>
            <div class="step">init</div>
          </li>
          <li>
            <div class="step">beforeRead</div>
          </li>
          <li>
            <div class="step">read</div>
          </li>
          <li>
            <div class="step">afterRead</div>
          </li>
          <li>
            <div class="step">betweenReadCompile</div>
          </li>
          <li>
            <div class="step">beforeCompile</div>
          </li>
          <li>
            <div class="step">compile</div>
          </li>
          <li>
            <div class="step">afterCompile</div>
          </li>
          <li>
            <div class="step">betweenCompileWrite</div>
          </li>
          <li>
            <div class="step">beforeWrite</div>
          </li>
          <li>
            <div class="step">write</div>
          </li>
          <li>
            <div class="step">afterWrite</div>
          </li>
          <li>
            <div class="step">betweenWriteOptimize</div>
          </li>
          <li>
            <div class="step">beforeOptimize</div>
          </li>
          <li>
            <div class="step">optimize</div>
          </li>
          <li>
            <div class="step">afterOptimize</div>
          </li>
          <li>
            <div class="step">complete</div>
          </li>
        </ul>
      </div>
      <div class="span4">
        <h3>remove</h3>
        <ul>
          <li>
            <div class="step">init</div>
          </li>
          <li>
            <div class="step">beforeRead</div>
          </li>
          <li>
            <div class="step">read</div>
          </li>
          <li>
            <div class="step">afterRead</div>
          </li>
          <li>
            <div class="step">beforeDelete</div>
          </li>
          <li>
            <div class="step">delete</div>
          </li>
          <li>
            <div class="step">afterDelete</div>
          </li>
          <li>
            <div class="step">beforeCompile</div>
          </li>
          <li>
            <div class="step">compile</div>
          </li>
          <li>
            <div class="step">afterCompile</div>
          </li>
          <li>
            <div class="step">betweenCompileWrite</div>
          </li>
          <li>
            <div class="step">beforeWrite</div>
          </li>
          <li>
            <div class="step">write</div>
          </li>
          <li>
            <div class="step">afterWrite</div>
          </li>
          <li>
            <div class="step">betweenWriteOptimize</div>
          </li>
          <li>
            <div class="step">beforeOptimize</div>
          </li>
          <li>
            <div class="step">optimize</div>
          </li>
          <li>
            <div class="step">afterOptimize</div>
          </li>
          <li>
            <div class="step">complete</div>
          </li>
        </ul>
      </div>
    </div>

    <div data-type="clean" class="row workflow-steps hide">
      <div class="span4">
        <h3>preClean</h3>
        <ul>
          <li>
            <div class="step">init</div>
          </li>
          <li>
            <div class="step">complete</div>
          </li>
        </ul>
      </div>

      <div class="span4">
        <h3>cleanFile</h3>
        <ul>
          <li>
            <div class="step">init</div>
          </li>
          <li>
            <div class="step">beforeRead</div>
          </li>
          <li>
            <div class="step">read</div>
          </li>
          <li>
            <div class="step">afterRead</div>
          </li>
          <li>
            <div class="step">beforeDelete</div>
          </li>
          <li>
            <div class="step">delete</div>
          </li>
          <li>
            <div class="step">afterDelete</div>
          </li>
          <li>
            <div class="step">complete</div>
          </li>
        </ul>
      </div>
      <div class="span4">
        <h3>postClean</h3>
        <ul>
          <li>
            <div class="step">init</div>
          </li>
          <li>
            <div class="step">complete</div>
          </li>
        </ul>
      </div>
    </div>



    <div class="page-header" id="callback">
      <h1>
          Your Workflow Module Callback
        <small><span class="options">when the rubber hits the code</span></small>
      </h1>
    </div>

    <p>So a module's code is registered to be called in the right spot in the workflow. What happens when Mimosa calls the function that has been registered?</p>

    <p>The executed function is handed three arguments.</p>

    <ol>
      <li><code class="options">config</code>: The full <code class="options">mimosa-config</code> enriched with all sorts of useful data beyond the default <code class="options">mimosa-config</code>, and including the configuration for the module being developed.</li>
      <li><code class="options">options</code>: An object containing information about the asset(s)/extension currently being processed. At different steps of the a Mimosa workflow the options object will contain various important pieces of information. One of the first steps a module developer should take when developing a new module is to <code class="options">console.log</code> the content of the options object to see what sort of information is available at their desired workflow and workflow step.</li>
      <li><code class="options">next</code>: a workflow callback. This callback must be called when a module has finished processing. It tells Mimosa to execute the next step in the workflow. If for some reason a module decides that processing for the current asset/build step needs to stop, the callback can be called passing false. Ex: <code class="options">next(false)</code>. In most cases the workflow should not be ended prematurely.</li>
    </ol>

    <div class="page-header" id="register">
      <h1>
        Registering A Command Module
        <small><span class="options">add brand new commands</span></small>
      </h1>
    </div>

    <p>A command module has a very simple interface. A module that intends to implement a new command needs to implement and export a <code class='option'>registerCommand</code> function. That function takes a <a href="https://github.com/visionmedia/commander.js/">commander</a> <code class='option'>program</code> object for registering the command, the flags, the help text and a callback.</p>

    <p>If a function needs access to execute a <code class='option'>build</code> before running, or needs the <code class='option'>mimosa-config</code>, it can get accomplish those things using the second parameter passed to <code class='option'>registerCommand</code>. The second parameter, a <code class='option'>retrieveConfig</code> function, takes a flag indicating if a build is needed, and a callback. That callback should contain the command module's code, and it is passed the full <code class='option'>mimosa-config</code>.</p>

    <div class="page-header" id="install">
      <h1>
        Installing A Module
        <small><span class="options">You've coded it up, now what?</span></small>
      </h1>
    </div>

    <h2>During Development</h2>

    <p>The <code class="options">mimosa mod:install</code> command handles installing local modules to Mimosa. From inside the root module directory, the directory with the <code class="options">package.json</code> file, execute <code class="options">mimosa mod:install</code>. Then modify the modules array of a project's <code class="options">mimosa-config</code> to use the module. Fire up Mimosa and test your module out!</p>

    <h2>Publishing to NPM</h2>

    <p>If you are familiar with <a href="http://npmjs.org/">NPM</a>, this part is not new. A simple <code class="options">npm publish</code> from the root of your module will install a module to NPM so that anyone can get access to it.  Once it is in NPM, commands like <code class="options">mod:install</code> and <code class="options">mod:search</code> will be able to find it.</p>

    <p>If you have never published to NPM before, then spend a few minutes reading the <a href="https://npmjs.org/doc/developers.html">developer docs</a>. Just a few simple steps and you are ready to publish.</p>

    <p>With upcoming Mimosa releases, Mimosa will no longer recognize CoffeeScript modules. The CoffeeScript module skeleton delivered with <code class="options">mod:init -c</code> accounts for this by using Mimosa to build the CoffeeScript module when npm install and publish are used.</p>

    <p>If you do create and publish a module, let us know!!!</p>

  </section>

</div>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.7.2.min.js"><\/script>')</script>
<script src="js/vendor/bootstrap-collapse.js"></script>
<script src="js/vendor/bootstrap-scrollspy.js"></script>

<!-- scripts concatenated and minified via build script -->
<script src="js/plugins.js"></script>
<script src="js/main.js"></script>
<script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
<!-- end scripts -->

<script>
    var _gaq=[['_setAccount','UA-33737130-1'],['_trackPageview']];
    (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
    g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g,s)}(document,'script'));
</script>

</body>
</html>
